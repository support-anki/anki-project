<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>å°4ç†ç§‘ã€Œäººã®ä½“ã®ã¤ãã‚Šã¨é‹å‹•ã€â€” åŸºæœ¬ã¾ã¨ã‚ï¼ˆãƒãƒ¼ã‚«ãƒ¼å¼ï¼‰ v3</title>
<style>
  :root{
    --bg:#f7f7fb; --card:#fff; --ink:#111827; --muted:#6b7280; --brand:#3b4675;
    --ok:#16a34a; --warn:#f59e0b; --ng:#ef4444; --mask:#9ca3af; --border:#e5e7eb;
  }
  html[data-theme="dark"]{
    --bg:#0b1020; --card:#0f172a; --ink:#e5e7eb; --muted:#94a3b8; --brand:#9db1ff;
    --ok:#22c55e; --warn:#f59e0b; --ng:#ef4444; --mask:#475569; --border:#243044;
  }
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,emoji;}
  header{padding:12px 16px;background:var(--card);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10}
  header h1{margin:0;font-size:18px;color:var(--brand)}
  main{max-width:980px;margin:20px auto;padding:0 12px 60px}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 16px}
  button,.btn{
    appearance:none;border:1px solid var(--border);background:var(--card);border-radius:999px;
    padding:6px 12px;cursor:pointer;font-size:14px;color:var(--ink)
  }
  button:hover,.btn:hover{box-shadow:0 1px 0 rgba(0,0,0,.08)}
  .legend{margin-left:auto;display:flex;gap:8px;align-items:center}
  .dot{width:10px;height:10px;border-radius:999px;display:inline-block;border:1px solid var(--border)}
  .dot.ok{background:var(--ok)} .dot.warn{background:var(--warn)} .dot.ng{background:var(--ng)}
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin:14px 0}
  .qtitle{font-weight:700;margin:0 0 8px}
  .qbody{line-height:1.9;font-size:16px}
  .qactions{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
  .qactions button{font-size:12px;padding:6px 10px}
  .qmeta{color:var(--muted);font-size:12px;margin-top:6px}
  .note{font-size:12px;color:var(--muted)}
  .kbd{font:12px monospace;padding:2px 6px;border:1px solid var(--border);border-radius:6px;background:var(--card);color:var(--ink)}
  /* ãƒã‚¹ã‚¯ï¼ˆãƒãƒ¼ã‚«ãƒ¼ï¼‰ */
  .mask{--mask-bg: var(--mask);display:inline-block;min-width:2.2em;color:transparent;background:linear-gradient(0deg,var(--mask-bg),var(--mask-bg));border-radius:6px;padding:0 .4em;cursor:pointer;position:relative;transition:filter .15s ease;user-select:none}
  .mask:after{content:"ã€€"}
  .mask:hover{filter:brightness(0.95)}
  .mask.revealed{color:var(--ink);background:transparent;border-bottom:1px dashed #64748b}
  .mask[data-level="ok"]{box-shadow:inset 0 0 0 2px var(--ok)}
  .mask[data-level="warn"]{box-shadow:inset 0 0 0 2px var(--warn)}
  .mask[data-level="ng"]{box-shadow:inset 0 0 0 2px var(--ng)}
  .qcard{border:2px solid transparent;border-radius:14px;padding:10px}
  .qcard[data-level="ok"]{border-color:var(--ok)}
  .qcard[data-level="warn"]{border-color:var(--warn)}
  .qcard[data-level="ng"]{border-color:var(--ng)}
  .imgmask{position:relative;max-width:720px;margin:8px 0}
  .imgmask img{width:100%;height:auto;border-radius:12px;border:1px solid var(--border)}
  .mask.abs{position:absolute;display:flex;align-items:center;justify-content:center}
  .mask.abs.dragging{opacity:.9;outline:2px dashed #ef4444}
  .hud{position:fixed;right:10px;bottom:10px;z-index:99;padding:8px 10px;background:rgba(0,0,0,.6);color:#fff;font:12px/1.4 system-ui,Segoe UI;border-radius:8px}
</style>
</head>
<body>
<header>
  <h1>å°4ç†ç§‘ã€Œäººã®ä½“ã®ã¤ãã‚Šã¨é‹å‹•ã€â€” å˜å…ƒã¾ã¨ã‚ï¼ˆãƒãƒ¼ã‚«ãƒ¼å¼ï¼‰ v3</h1>
</header>
<main>
  <section class="toolbar" aria-label="æ“ä½œãƒ‘ãƒãƒ«">
    <button class="btn" id="toggle-theme" title="ãƒ©ã‚¤ãƒˆ/ãƒ€ãƒ¼ã‚¯åˆ‡æ›¿">ğŸŒ“ ãƒ†ãƒ¼ãƒ</button>
    <button class="btn" id="filter-ng" title="è¦å¾©ç¿’ã®ã¿">ğŸ”´ è¦å¾©ç¿’ã ã‘</button>
    <button class="btn" id="queue-ng" title="è¦å¾©ç¿’ã‚’é †ç•ªå‡ºé¡Œ">ğŸ¯ èµ¤ã‚­ãƒ¥ãƒ¼</button>
    <button class="btn" id="reset-all" title="ã™ã¹ã¦ãƒªã‚»ãƒƒãƒˆ">â™»ï¸ å…¨ãƒªã‚»ãƒƒãƒˆ</button>
    <button class="btn" id="export" title="å­¦ç¿’çŠ¶æ…‹ã‚’æ›¸ãå‡ºã—">â¬‡ï¸ çŠ¶æ…‹ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
    <label class="btn" for="import-file">â¬†ï¸ çŠ¶æ…‹ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</label>
    <input type="file" id="import-file" accept="application/json" style="display:none">
    <div class="legend" aria-label="å‡¡ä¾‹">
      <span class="dot ng" title="è¦å¾©ç¿’"></span>èµ¤
      <span class="dot warn" title="ã‚ã‚„ã—ã„"></span>é»„
      <span class="dot ok" title="ã§ããŸ"></span>ç·‘
    </div>
  </section>

  <!-- â‘  åŸºæœ¬ç”¨èªï¼ˆã»ã­ãƒ»é–¢ç¯€ãƒ»ãã‚“è‚‰ï¼‰ -->
  <div class="card qcard" data-qid="q1">
    <p class="qtitle">â‘  ä½“ã®ã¤ãã‚Šï¼ˆåŸºæœ¬ç”¨èªï¼‰</p>
    <div class="qbody">
      ä½“ã‚’ã•ã‚ã‚‹ã¨ã€ã‹ãŸã„éƒ¨åˆ†ã¨ã‚„ã‚ã‚‰ã‹ã„éƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ã€‚ã‹ãŸã„éƒ¨åˆ†ã‚’
      <span class="mask" data-id="q1-a1" data-answer="ã»ã­"></span>
      ã¨ã„ã„ã€ã‹ãŸã„ã¨ã“ã‚ã©ã†ã—ã®ã¤ãªãç›®ã§ä½“ã‚’æ›²ã’ã‚‰ã‚Œã‚‹ã¨ã“ã‚ã‚’
      <span class="mask" data-id="q1-a2" data-answer="é–¢ç¯€"></span>
      ã¨ã„ã„ã¾ã™ã€‚ã‚„ã‚ã‚‰ã‹ã„éƒ¨åˆ†ã§ã€åŠ›ã‚’å…¥ã‚Œã‚‹ã¨ã‹ãŸã•ãŒå¤‰ã‚ã‚‹éƒ¨åˆ†ã‚’
      <span class="mask" data-id="q1-a3" data-answer="ãã‚“è‚‰"></span>
      ã¨ã„ã„ã¾ã™ã€‚
    </div>
    <div class="qactions">
      <button data-level="ok">âœ… ã§ããŸ</button>
      <button data-level="warn">â–³ ã‚ã‚„ã—ã„</button>
      <button data-level="ng">âŒ è¦å¾©ç¿’</button>
      <button data-reset>è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <div class="qmeta">å‡ºå…¸ï¼šã‚¹ãƒ†ãƒƒãƒ—1ï¼2-1</div>
  </div>

  <!-- â‘¡ é–¢ç¯€åï¼ˆè‚©ãƒ»ã²ã˜ãƒ»ã²ã–ï¼‰ -->
  <div class="card qcard" data-qid="q2">
    <p class="qtitle">â‘¡ é–¢ç¯€ã®åå‰</p>
    <div class="qbody">
      ï¼ˆã€€ã€€ã€€ï¼‰ã®é–¢ç¯€ï¼š<span class="mask" data-id="q2-a1" data-answer="ã‹ãŸ"></span><br>
      ï¼ˆã€€ã€€ã€€ï¼‰ã®é–¢ç¯€ï¼š<span class="mask" data-id="q2-a2" data-answer="ã²ã˜"></span><br>
      ï¼ˆã€€ã€€ã€€ï¼‰ã®é–¢ç¯€ï¼š<span class="mask" data-id="q2-a3" data-answer="ã²ã–"></span>
    </div>
    <div class="qactions">
      <button data-level="ok">âœ… ã§ããŸ</button>
      <button data-level="warn">â–³ ã‚ã‚„ã—ã„</button>
      <button data-level="ng">âŒ è¦å¾©ç¿’</button>
      <button data-reset>è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <div class="qmeta">å‡ºå…¸ï¼šã‚¹ãƒ†ãƒƒãƒ—1ï¼2-1</div>
  </div>

  <!-- â‘¢ ãã‚“è‚‰ã®ã¯ãŸã‚‰ãï¼ˆæ‹®æŠ—ï¼‰ -->
  <div class="card qcard" data-qid="q3">
    <p class="qtitle">â‘¢ ãã‚“è‚‰ã®ã¯ãŸã‚‰ãï¼ˆæ‹®æŠ—ã®é–¢ä¿‚ï¼‰</p>
    <div class="qbody">
      ã†ã§ã®ãã‚“è‚‰ã¯ã€ã»ã­ã‚’ã¯ã•ã‚“ã§
      <span class="mask" data-id="q3-a1" data-answer="åå¯¾ã®"></span>
      å‹•ãã‚’ã™ã‚‹ãã‚“è‚‰ã¨çµ„ã¿åˆã‚ã•ã£ã¦ã„ã¾ã™ã€‚ãã‚“è‚‰ã®ã¯ã—ã¯
      <span class="mask" data-id="q3-a2" data-answer="ã»ã­"></span>
      ã«ã¤ã„ã¦ã„ã¾ã™ã€‚ã†ã§ã‚’æ›²ã’ã‚‹ã¨ã€å†…ãŒã‚ã®ãã‚“è‚‰ãŒ
      <span class="mask" data-id="q3-a3" data-answer="ã¡ã¢ã‚€"></span>
      ã€å¤–ãŒã‚ã®ãã‚“è‚‰ãŒ
      <span class="mask" data-id="q3-a4" data-answer="ã‚†ã‚‹ã‚€"></span>
      ã€‚ã†ã§ã‚’ã®ã°ã™ã¨ãã¯ã€ã“ã‚ŒãŒåå¯¾ã«ãªã‚Šã¾ã™ã€‚
    </div>
    <div class="qactions">
      <button data-level="ok">âœ… ã§ããŸ</button>
      <button data-level="warn">â–³ ã‚ã‚„ã—ã„</button>
      <button data-level="ng">âŒ è¦å¾©ç¿’</button>
      <button data-reset>è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <div class="qmeta">å‡ºå…¸ï¼šã‚¹ãƒ†ãƒƒãƒ—2</div>
  </div>

  <!-- â‘£ åŠ›ã‚’å…¥ã‚ŒãŸã¨ãã®ã‹ãŸã• -->
  <div class="card qcard" data-qid="q4">
    <p class="qtitle">â‘£ åŠ›ã‚’å…¥ã‚ŒãŸã¨ãã®ã‹ãŸã•</p>
    <div class="qbody">
      ã‚¢ï¼ˆãã‚“è‚‰ï¼‰ã¯ã€åŠ›ã‚’å…¥ã‚Œã¦ã„ã‚‹ã¨ãã®æ–¹ãŒ
      <span class="mask" data-id="q4-a1" data-answer="ã‹ãŸã„"></span>
      ã€‚ ã‚¤ï¼ˆã»ã­ï¼‰ã®ã‹ãŸã•ã¯ã€åŠ›ã®æœ‰ç„¡ã§
      <span class="mask" data-id="q4-a2" data-answer="åŒã˜"></span>
      ã€‚
    </div>
    <div class="qactions">
      <button data-level="ok">âœ… ã§ããŸ</button>
      <button data-level="warn">â–³ ã‚ã‚„ã—ã„</button>
      <button data-level="ng">âŒ è¦å¾©ç¿’</button>
      <button data-reset>è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <div class="qmeta">å‡ºå…¸ï¼š2-2ï¼2-3</div>
  </div>

  <!-- â‘¤ æ­£èª¤ï¼ˆâ—‹Ã—ï¼‰ -->
  <div class="card qcard" data-qid="q5">
    <p class="qtitle">â‘¤ ã»ã­ãƒ»ãã‚“è‚‰ã®ã¯ãŸã‚‰ãï¼ˆâ—‹Ã—ï¼‰</p>
    <div class="qbody">
      é¡”ã®ãã‚“è‚‰ã®ã¯ãŸã‚‰ãã§ã€ã•ã¾ã–ã¾ãªè¡¨æƒ…ã‚’ã¤ãã‚‹ã“ã¨ãŒã§ãã‚‹ â†’
      <span class="mask" data-id="q5-a1" data-answer="â—‹"></span><br>
      ã»ã­ã¯ã€ä½“ã‚’ã•ã•ãˆãŸã‚Šå‹•ã‹ã—ãŸã‚Šã™ã‚‹ã“ã¨ã«é–¢ä¿‚ã—ãªã„ â†’
      <span class="mask" data-id="q5-a2" data-answer="Ã—"></span><br>
      ã‚€ã­ã®ã»ã­ã¯ã€å†…å´ã®è‚ºã‚„å¿ƒè‡“ã‚’å®ˆã£ã¦ã„ã‚‹ â†’
      <span class="mask" data-id="q5-a3" data-answer="â—‹"></span><br>
      ã˜ã‚…ã‚“ã³é‹å‹•ã‚’ã™ã‚‹ã¨ã€ãã‚“è‚‰ãŒã‚†ã‚‹ã‚“ã ã‚Šã¡ã¢ã‚“ã ã‚Šã™ã‚‹ â†’
      <span class="mask" data-id="q5-a4" data-answer="â—‹"></span>
    </div>
    <div class="qactions">
      <button data-level="ok">âœ… ã§ããŸ</button>
      <button data-level="warn">â–³ ã‚ã‚„ã—ã„</button>
      <button data-level="ng">âŒ è¦å¾©ç¿’</button>
      <button data-reset>è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <div class="qmeta">å‡ºå…¸ï¼šã‚¹ãƒ†ãƒƒãƒ—3</div>
  </div>

  <!-- â‘¥ ã»ã­ã®å½¹ç›®ï¼ˆ2ã¤ï¼‰ -->
  <div class="card qcard" data-qid="q6">
    <p class="qtitle">â‘¥ ã»ã­ã®å½¹ç›®ï¼ˆ2ã¤ï¼‰</p>
    <div class="qbody">
      ã»ã­ã¯ã€ï¼ˆ1ï¼‰
      <span class="mask" data-id="q6-a1" data-answer="ä½“ã®å†…å´ã‚’å®ˆã‚‹"></span>
      ã€ï¼ˆ2ï¼‰
      <span class="mask" data-id="q6-a2" data-answer="ä½“ã‚’ã•ã•ãˆã‚‹"></span>
      ã®å½¹ç›®ãŒã‚ã‚‹ã€‚
    </div>
    <div class="qactions">
      <button data-level="ok">âœ… ã§ããŸ</button>
      <button data-level="warn">â–³ ã‚ã‚„ã—ã„</button>
      <button data-level="ng">âŒ è¦å¾©ç¿’</button>
      <button data-reset>è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <div class="qmeta">å‡ºå…¸ï¼šã‚¹ãƒ†ãƒƒãƒ—3</div>
  </div>

  <!-- â‘¦ äººä»¥å¤–ã®å‹•ç‰©ã«ã‚‚â€¦ï¼ˆå…±é€šç‚¹ï¼‰ -->
  <div class="card qcard" data-qid="q7">
    <p class="qtitle">â‘¦ å‹•ç‰©ã®ä½“ã®ã¤ãã‚Šï¼ˆäººã¨ã®å…±é€šç‚¹ï¼‰</p>
    <div class="qbody">
      ã‚¦ã‚µã‚®ãªã©ã®äººä»¥å¤–ã®å‹•ç‰©ã«ã‚‚ã€äººã¨åŒã˜ã‚ˆã†ã«
      <span class="mask" data-id="q7-a1" data-answer="ã»ã­"></span>ã€
      <span class="mask" data-id="q7-a2" data-answer="ãã‚“è‚‰"></span>ã€
      <span class="mask" data-id="q7-a3" data-answer="é–¢ç¯€"></span>
      ãŒã‚ã‚Šã€ãã‚Œã‚‰ã®ã¯ãŸã‚‰ãã«ã‚ˆã£ã¦ä½“ã‚’ã•ã•ãˆãŸã‚Šå‹•ã‹ã—ãŸã‚Šã—ã¦ã„ã‚‹ã€‚
    </div>
    <div class="qactions">
      <button data-level="ok">âœ… ã§ããŸ</button>
      <button data-level="warn">â–³ ã‚ã‚„ã—ã„</button>
      <button data-level="ng">âŒ è¦å¾©ç¿’</button>
      <button data-reset>è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <div class="qmeta">å‡ºå…¸ï¼š2-2ï¼2-3ï¼ã‚¹ãƒ†ãƒƒãƒ—4</div>
  </div>

  <!-- â‘§ ãã‚“è‚‰ã®ã‹ãŸã•ï¼ç¢ºã‹ã‚æ–¹ -->
  <div class="card qcard" data-qid="q8">
    <p class="qtitle">â‘§ ã¡ã¢ã‚“ã ãã‚“è‚‰ã®ã‹ãŸã•ã¨ç¢ºã‹ã‚æ–¹</p>
    <div class="qbody">
      ã¡ã¢ã‚“ã ãã‚“è‚‰ã®ã‹ãŸã•ï¼š
      <span class="mask" data-id="q8-a1" data-answer="ã‹ãŸããªã£ã¦ã„ã‚‹"></span><br>
      ç¢ºã‹ã‚ã‚‹æ–¹æ³•ï¼ˆä¾‹ï¼‰ï¼š
      <span class="mask" data-id="q8-a2" data-answer="ã²ã˜ã‚’æ›²ã’ãŸã¨ãã€ä¸Šå´ã®ã¡ã¢ã‚“ã ãã‚“è‚‰ã‚’ã•ã‚ã£ã¦ã€æ›²ã’ã‚‹å‰ã¨æ¯”ã¹ã‚‹"></span>
    </div>
    <div class="qactions">
      <button data-level="ok">âœ… ã§ããŸ</button>
      <button data-level="warn">â–³ ã‚ã‚„ã—ã„</button>
      <button data-level="ng">âŒ è¦å¾©ç¿’</button>
      <button data-reset>è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <div class="qmeta">å‡ºå…¸ï¼šã‚¹ãƒ†ãƒƒãƒ—4</div>
  </div>

  <div class="card">
    <details>
      <summary>ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ / æ“ä½œãƒ’ãƒ³ãƒˆ</summary>
      <ul>
        <li>ãƒã‚¹ã‚¯ï¼šã‚¿ãƒƒãƒ—ã§è¡¨ç¤ºã€‚<b>é•·æŠ¼ã—</b>ï¼ˆ0.7ç§’ï¼‰ã§ãƒãƒ©è¦‹ï¼ˆé›¢ã™ã¨æˆ»ã‚‹ï¼‰ã€‚</li>
        <li>ãƒã‚¹ã‚¯ã‚’<b>å³ã‚¯ãƒªãƒƒã‚¯</b> or <b>äºŒæœ¬æŒ‡ã‚¿ãƒƒãƒ—</b>ã§å¾©ç¿’è‰²ï¼ˆç·‘â†’é»„â†’èµ¤â†’ç„¡ï¼‰ã‚’å¾ªç’°ã€‚</li>
        <li><span class="kbd">H</span>ï¼šãƒ’ãƒ³ãƒˆè¡¨ç¤ºï¼<span class="kbd">R</span>ï¼šå…¨ãƒªã‚»ãƒƒãƒˆã€‚</li>
        <li>ğŸŒ“ï¼šãƒ€ãƒ¼ã‚¯/ãƒ©ã‚¤ãƒˆã€ğŸ”´ï¼šèµ¤ã®ã¿è¡¨ç¤ºã€ğŸ¯ï¼šèµ¤é †å‡ºé¡Œï¼ˆEnterã§æ¬¡ã€Escçµ‚äº†ï¼‰ã€‚</li>
        <li>â¬‡ï¸/â¬†ï¸ï¼šå­¦ç¿’çŠ¶æ…‹ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€‚</li>
      </ul>
    </details>
  </div>
  
  <!-- â‘¡.5 å›³ã‚ã‚Šï¼šé–¢ç¯€ã®åå‰ï¼ˆç”»åƒãƒã‚¹ã‚¯çµ±åˆï¼‰ -->
  <div class="card qcard" data-qid="q2z">
    <p class="qtitle">â‘¡ å›³ã‚’è¦‹ã¦ç­”ãˆã‚ˆã†ï¼ˆé–¢ç¯€ã®åå‰ï¼‰</p>
    <div class="qbody">
      <div class="imgmask" id="imgmask">
        <img src="/anki-project/assets/img/sci/4rika_body_all.webp" alt="äººã®ä½“ã®ã¤ãã‚Šã¨é‹å‹• å›³" />
        <!-- ç”»åƒä¸Šã«ãƒã‚¹ã‚¯ï¼ˆ%æŒ‡å®šã§ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰ã€‚ä¸‹è¨˜ã¯åˆæœŸå€¤ã€‚å¿…è¦ãªã‚‰é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§èª¿æ•´ -->
        <span class="mask abs" data-id="z-a1" data-answer="ã‹ãŸ" style="left:12.2%; top:12.7%; width:16.8%; height:2.7%;"></span>
        <span class="mask abs" data-id="z-a2" data-answer="ã²ã˜" style="left:65.1%; top:18.9%; width:17.8%; height:2.7%;"></span>
        <span class="mask abs" data-id="z-a3" data-answer="ã²ã–" style="left:68.7%; top:27.1%; width:17.8%; height:2.7%;"></span>
        <!-- ã‚¢ãƒ»ã‚¤ã®å›³ï¼ˆä¸‹éƒ¨ï¼‰ -->
        <span class="mask abs" data-id="z-a4" data-answer="ãã‚“è‚‰" style="left:50.7%; top:59.9%; width:12.8%; height:2.4%;"></span>
        <span class="mask abs" data-id="z-a5" data-answer="ã»ã­" style="left:29.1%; top:64.0%; width:10.8%; height:2.4%;"></span>
      </div>
      <p class="note">ãƒ’ãƒ³ãƒˆï¼šè‚©ãƒ»ã²ã˜ãƒ»ã²ã–ï¼ã‚¢=ãã‚“è‚‰ã€ã‚¤=ã»ã­ã€‚</p>
    </div>
    <div class="qactions">
      <button data-level="ok">âœ… ã§ããŸ</button>
      <button data-level="warn">â–³ ã‚ã‚„ã—ã„</button>
      <button data-level="ng">âŒ è¦å¾©ç¿’</button>
      <button data-reset>è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    <div class="qmeta">å›³ç‰ˆï¼š4rika_body_all.webpï¼ˆ%åº§æ¨™ã§ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼‰</div>
  </div>

</main>
<script>
  // -------- Utilities --------
  const LS = { get:k=>{try{return JSON.parse(localStorage.getItem(k))}catch{return null}}, set:(k,v)=>localStorage.setItem(k,JSON.stringify(v)), del:k=>localStorage.removeItem(k) };
  const KM = id=>`mask:${id}`, KQ = qid=>`qlevel:${qid}`, KT='pref:theme';

  // Theme
  const themeBtn=document.getElementById('toggle-theme');
  const savedTheme=LS.get(KT); if(savedTheme){ document.documentElement.setAttribute('data-theme', savedTheme); }
  themeBtn.addEventListener('click',()=>{ const cur=document.documentElement.getAttribute('data-theme')||'light'; const next=(cur==='dark')?'light':'dark'; document.documentElement.setAttribute('data-theme',next); LS.set(KT,next); });

  // Mask helpers
  function reveal(el,text){ el.classList.add('revealed'); el.textContent=text; }
  function conceal(el){ el.classList.remove('revealed'); el.textContent='ã€€'; }
  function applySavedState(el){ const s=LS.get(KM(el.dataset.id)); if(!s)return; if(s.ans)reveal(el,s.ans); if(s.level)el.setAttribute('data-level',s.level); }
  function saveMask(el){ const obj=LS.get(KM(el.dataset.id))||{}; if(el.classList.contains('revealed')) obj.ans=el.textContent; LS.set(KM(el.dataset.id),obj); }
  function hintOne(el){ if(el.classList.contains('revealed'))return; const h=el.dataset.hint; if(h) el.textContent=h; }
  function cycleLevel(el){ const order=[null,'ok','warn','ng',null]; const cur=el.getAttribute('data-level')||null; const next=order[order.indexOf(cur)+1]; if(next) el.setAttribute('data-level',next); else el.removeAttribute('data-level'); const obj=LS.get(KM(el.dataset.id))||{}; obj.level=next||undefined; LS.set(KM(el.dataset.id),obj); }
  function addLongPressPeek(el){ let t=null; const down=(e)=>{ if(e.button===2) return; t=setTimeout(()=>{ el.dataset._peek='1'; reveal(el, el.dataset.answer); },700); }; const up=()=>{ clearTimeout(t); if(el.dataset._peek==='1'){ el.dataset._peek=''; const saved=LS.get(KM(el.dataset.id)); if(!saved||!saved.ans) conceal(el); } }; el.addEventListener('mousedown',down); el.addEventListener('touchstart',down,{passive:true}); ['mouseup','mouseleave','touchend','touchcancel'].forEach(ev=>el.addEventListener(ev,up)); }

  // Init masks
  document.querySelectorAll('.mask').forEach(el=>{
    applySavedState(el);
    addLongPressPeek(el);
    el.addEventListener('click',()=>{ reveal(el,el.dataset.answer); saveMask(el); });
    el.addEventListener('contextmenu',(e)=>{ e.preventDefault(); cycleLevel(el); });
    let touches=0,timer=null;
    el.addEventListener('touchstart',e=>{ touches=e.touches.length; clearTimeout(timer); timer=setTimeout(()=>{ if(touches>=2) cycleLevel(el); },120); },{passive:true});
  });

  // Cards
  document.querySelectorAll('.qcard').forEach(card=>{
    const qid=card.dataset.qid;
    const saved=LS.get(KQ(qid)); if(saved) card.setAttribute('data-level', saved);
    card.querySelectorAll('.qactions button[data-level]').forEach(btn=>{
      btn.addEventListener('click',()=>{ const lvl=btn.dataset.level; card.setAttribute('data-level',lvl); LS.set(KQ(qid),lvl); });
    });
    card.querySelector('.qactions button[data-reset]')?.addEventListener('click',()=>{
      card.querySelectorAll('.mask').forEach(el=>{ conceal(el); LS.del(KM(el.dataset.id)); el.removeAttribute('data-level'); });
      card.removeAttribute('data-level'); LS.del(KQ(qid));
    });
  });

  // Global buttons
  document.getElementById('reset-all').addEventListener('click',()=>{
    if(!confirm('å…¨ã¦ã®è¡¨ç¤ºãƒ»å¾©ç¿’çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) return;
    Object.keys(localStorage).filter(k=>k.startsWith('mask:')||k.startsWith('qlevel:')).forEach(k=>localStorage.removeItem(k));
    location.reload();
  });

  let filterNG=false;
  document.getElementById('filter-ng').addEventListener('click',()=>{
    filterNG=!filterNG;
    document.querySelectorAll('.qcard').forEach(card=>{
      if(!filterNG){ card.style.display=''; return; }
      const hasNGMask=!!card.querySelector('.mask[data-level="ng"]');
      const cardNG=card.getAttribute('data-level')==='ng';
      card.style.display=(hasNGMask||cardNG)?'':'none';
    });
  });

  document.getElementById('queue-ng').addEventListener('click',()=>{
    const masks=Array.from(document.querySelectorAll('.mask[data-level="ng"]'));
    if(!masks.length){ alert('è¦å¾©ç¿’ï¼ˆèµ¤ï¼‰ã®ç©ºæ¬„ãŒã‚ã‚Šã¾ã›ã‚“ã€‚'); return; }
    let i=0; const hilite=(el)=>{ el.scrollIntoView({behavior:'smooth',block:'center'}); el.style.outline='2px solid var(--ng)'; setTimeout(()=>el.style.outline='',1200); };
    hilite(masks[i]);
    const next=()=>{ i=(i+1)%masks.length; hilite(masks[i]); };
    document.addEventListener('keydown',function onk(e){ if(e.key==='Enter'){ next(); } if(e.key==='Escape'){ document.removeEventListener('keydown',onk); } });
    alert('èµ¤ã®ç©ºæ¬„ã‚’é †ç•ªã«å‡ºé¡Œã—ã¾ã™ã€‚Enterã§æ¬¡ã¸ã€Escã§çµ‚äº†ã€‚');
  });

  // Export / Import
  document.getElementById('export').addEventListener('click',()=>{
    const data={theme:document.documentElement.getAttribute('data-theme')||'light'};
    for(const [k,v] of Object.entries(localStorage)){ if(k.startsWith('mask:')||k.startsWith('qlevel:')) data[k]=v; }
    const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
    const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='body_motion_state.json'; a.click();
    setTimeout(()=>URL.revokeObjectURL(a.href),1000);
  });
  document.getElementById('import-file').addEventListener('change',(e)=>{
    const f=e.target.files[0]; if(!f) return; const r=new FileReader();
    r.onload=()=>{ try{ const data=JSON.parse(r.result); Object.keys(data).forEach(k=>{ if(k.startsWith('mask:')||k.startsWith('qlevel:')) localStorage.setItem(k,data[k]); }); if(data.theme){ document.documentElement.setAttribute('data-theme', data.theme); LS.set('pref:theme', data.theme); } alert('ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Œäº†ã€‚å†èª­ã¿è¾¼ã¿ã—ã¾ã™ã€‚'); location.reload(); }catch(err){ alert('JSONã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚'); } };
    r.readAsText(f,'utf-8');
  });

  // Shortcuts
  document.addEventListener('keydown',(e)=>{
    // Devãƒ¢ãƒ¼ãƒ‰ã®ã‚­ãƒ¼ãŒå„ªå…ˆã•ã‚Œã‚‹ã®ã§ã“ã“ã§ã¯H/Rã®ã¿
    if(e.key==='h' || e.key==='H'){ document.querySelectorAll('.mask').forEach(el=>{ if(!el.classList.contains('revealed')){ const h=el.dataset.hint; if(h) el.textContent=h; }}); }
    if(e.key==='r' || e.key==='R'){ document.getElementById('reset-all').click(); }
  });

  // --- Mask Dev Mode ----------------------------------------------------
  // ?dev=1 ã§ON or Alt+D ã§ãƒˆã‚°ãƒ«ã€‚
  // ã‚¯ãƒªãƒƒã‚¯ã§é¸æŠã€ãƒ‰ãƒ©ãƒƒã‚°ç§»å‹•OKã€‚Alt+çŸ¢å°=0.1% / Shift+Alt+çŸ¢å°=1px
  // Alt+S: é¸æŠã®ç¾åœ¨å€¤ã‚’consoleå‡ºåŠ›ã€Alt+C: å…¨ãƒã‚¹ã‚¯ã®ç¾åœ¨å€¤ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰
  (function(){
    const params=new URLSearchParams(location.search);
    let DEV=params.get('dev')==='1';
    let cur=null, hud=null, dragging=false, start={x:0,y:0,l:0,t:0}, box=null;

    function pct(v){ return parseFloat(String(v).replace('%',''))||0; }
    function px2pct(px, base){ return (px/base*100); }

    function ensureHUD(){
      if(hud) return;
      hud=document.createElement('div');
      hud.className='hud';
      hud.innerHTML='[Mask Dev] OFF';
      document.body.appendChild(hud);
    }
    function setHUD(txt){ ensureHUD(); hud.textContent='[Mask Dev] '+txt; }

    function select(el){
      if(cur) cur.classList.remove('dragging');
      cur=el; if(!cur){ setHUD('ON'); return; }
      cur.classList.add('dragging');
      setHUD(`ON  id=${cur.dataset.id}  left=${cur.style.left} top=${cur.style.top}  w=${cur.style.width} h=${cur.style.height}  | Alt+çŸ¢å°=0.1% / Shift+Alt+çŸ¢å°=1px / Alt+S=ãƒ­ã‚° / Alt+C=ã‚³ãƒ”ãƒ¼`);
    }

    function toggleDev(){
      DEV=!DEV; ensureHUD();
      if(!DEV){ if(cur){ cur.classList.remove('dragging'); cur=null; } setHUD('OFF'); }
      else setHUD('ON ã‚¯ãƒªãƒƒã‚¯ã§é¸æŠï¼†ãƒ‰ãƒ©ãƒƒã‚°å¯');
    }

    // ãƒ‰ãƒ©ãƒƒã‚°ç§»å‹•
    document.addEventListener('pointerdown',(e)=>{
      if(!DEV) return;
      const m=e.target.closest('.mask.abs'); if(!m) return;
      e.preventDefault(); select(m);
      dragging=true; box=m.parentElement.getBoundingClientRect();
      start={x:e.clientX,y:e.clientY, l:pct(m.style.left), t:pct(m.style.top)};
      m.setPointerCapture(e.pointerId);
    });
    document.addEventListener('pointermove',(e)=>{
      if(!DEV || !dragging || !cur) return;
      const dx=e.clientX-start.x, dy=e.clientY-start.y;
      cur.style.left=(start.l + px2pct(dx, box.width))+'%';
      cur.style.top =(start.t + px2pct(dy, box.height))+'%';
      setHUD(`id=${cur.dataset.id} left=${cur.style.left} top=${cur.style.top} w=${cur.style.width} h=${cur.style.height}`);
    });
    document.addEventListener('pointerup',(e)=>{ if(!DEV) return; dragging=false; });

    // ã‚­ãƒ¼æ“ä½œï¼ˆdocumentã«ç›´æ¥ã€‚DevToolsã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒã‚ã£ã¦ã‚‚æ‹¾ãˆã‚‹ã“ã¨ãŒå¤šã„ï¼‰
    window.addEventListener('keydown',(e)=>{
      if(e.altKey && e.key.toLowerCase()==='d'){ e.preventDefault(); toggleDev(); return; }
      if(!DEV || !cur) return;

      // Alt+S: é¸æŠãƒ­ã‚°
      if(e.altKey && e.key.toLowerCase()==='s'){
        console.log(`[${cur.dataset.id}] left:${cur.style.left}; top:${cur.style.top}; width:${cur.style.width}; height:${cur.style.height};`);
        setHUD('ç¾åœ¨å€¤ã‚’ console ã«å‡ºåŠ›ã—ã¾ã—ãŸ');
        return;
      }
      // Alt+C: å…¨ã‚³ãƒ”ãƒ¼
      if(e.altKey && e.key.toLowerCase()==='c'){
        const text=[...document.querySelectorAll('.mask.abs')].map(el=>`[${el.dataset.id}] left:${el.style.left}; top:${el.style.top}; width:${el.style.width}; height:${el.style.height};`).join('\n');
        if(navigator.clipboard) navigator.clipboard.writeText(text);
        console.log(text);
        setHUD('å…¨ãƒã‚¹ã‚¯ã®å€¤ã‚’ã‚³ãƒ”ãƒ¼ï¼ãƒ­ã‚°ã—ã¾ã—ãŸ');
        return;
      }

      if(!e.altKey) return; // ä»¥é™ã¯Altä½µç”¨

      const stepPct=0.1;
      const movePct=(dx,dy)=>{
        cur.style.left=(pct(cur.style.left)+dx)+'%';
        cur.style.top =(pct(cur.style.top)+dy)+'%';
        setHUD(`id=${cur.dataset.id} left=${cur.style.left} top=${cur.style.top} w=${cur.style.width} h=${cur.style.height}`);
      };
      const movePx=(dx,dy)=>{
        const rect=cur.parentElement.getBoundingClientRect();
        movePct(px2pct(dx,rect.width), px2pct(dy,rect.height));
      };

      if(e.key==='ArrowLeft'){ e.preventDefault(); e.shiftKey? movePx(-1,0): movePct(-stepPct,0); }
      if(e.key==='ArrowRight'){ e.preventDefault(); e.shiftKey? movePx(+1,0): movePct(+stepPct,0); }
      if(e.key==='ArrowUp'){ e.preventDefault(); e.shiftKey? movePx(0,-1): movePct(0,-stepPct); }
      if(e.key==='ArrowDown'){ e.preventDefault(); e.shiftKey? movePx(0,+1): movePct(0,+stepPct); }
    }, {capture:true});

    // ã‚¯ãƒªãƒƒã‚¯é¸æŠï¼ˆé€šå¸¸ã‚¯ãƒªãƒƒã‚¯ã§ã‚‚é¸ã¹ã‚‹ï¼‰
    document.addEventListener('click',(e)=>{
      if(!DEV) return;
      const m=e.target.closest('.mask.abs'); if(!m) return;
      e.preventDefault(); select(m);
    });

    if(DEV) toggleDev(); // URL ?dev=1 ã§è‡ªå‹•ON
  })();
</script>
</body>
</html>
